version: "3.8"

# 使用外部网络（由 docker-compose-dind.yml 创建）
networks:
  proxy_net:
    external: true
    name: squid_proxy_net

services:
  # Example app service using squid proxy
  example-app:
    image: curlimages/curl:8.2.1
    container_name: ld_example_app
    networks:
      - proxy_net
    environment:
      - HTTP_PROXY=http://squid:3128
      - HTTPS_PROXY=http://squid:3128
      - http_proxy=http://squid:3128
      - https_proxy=http://squid:3128
      - NO_PROXY=localhost,127.0.0.1
    command: sleep infinity
    restart: unless-stopped
