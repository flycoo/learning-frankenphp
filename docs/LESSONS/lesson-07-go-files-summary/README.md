# Lesson 07 — Go 模块管理核心文件总结

本课总结了 Go 语言在模块化管理中使用的核心文件及其职责。

## 1. 官方核心文件

### [go.mod](https://go.dev/doc/modules/gomod-ref) (模块身份证)
- **职责**：定义模块的逻辑名称、Go 版本以及直接/间接依赖列表。
- **管理命令**：`go mod init`, `go mod tidy`, `go get`。
- **Git 策略**：**必须提交**。

### go.sum (依赖指纹)
- **职责**：存储所有依赖包特定版本的加密哈希值，确保依赖包的安全性和不可篡改性。
- **管理命令**：`go` 命令行工具自动维护。
- **Git 策略**：**必须提交**。

### go.work (工作区地图)
- **职责**：允许 Go 命令在多个本地模块中工作，通过 `use` 指令将本地目录映射到逻辑模块路径。
- **管理命令**：`go work init`, `go work use`, `go work sync`。
- **Git 策略**：**通常不提交**（除非项目强制要求所有开发者共享同一本地布局）。

### go.work.sum (工作区指纹)
- **职责**：类似于 `go.sum`，但针对整个 workspace 的依赖。
- **管理命令**：使用工作区模式时由 `go` 命令自动生成。
- **Git 策略**：通常与 `go.work` 保持一致。

---

## 2. 次要与官方相关文件

### vendor/ 目录
- **职责**：存放所有依赖包的源码副本。
- **管理命令**：`go mod vendor`。
- **相关文件**：`vendor/modules.txt`（版本元数据）。

### go.env
- **职责**：存储项目特定的 Go 环境变量（如 `GOPROXY`）。
- **Git 策略**：不常见，通常用于特定的构建服务器环境。

---

## 3. 非官方/第三方工具文件 (常见混淆)

| 文件名 | 工具来源 | 作用 |
| :--- | :--- | :--- |
| **.go-version** | asdf, gvm | 指定本地 shell 应该使用的 Go 编译器版本。 |
| **.tool-versions** | asdf | 聚合管理多种开发工具（Node, Go, Python 等）版本。 |
| **Gopkg.lock** | dep (旧) | Go Modules 出现前的旧版依赖管理文件。 |

---

## 总结表

| 文件名 | 角色 | 编辑方式 | 自动更新？ |
| :--- | :--- | :--- | :--- |
| **go.mod** | 声明依赖 | 手工 + 命令 | 是 (tidy/get) |
| **go.sum** | 校验完整性 | 严禁手动 | 是 (全部) |
| **go.work** | 本地多模块开发 | 命令 + 手工 | 是 (sync) |

这些文件共同构成了 Go 强大且健壮的依赖管理系统。在 FrankenPHP 这样的复杂项目中，你会经常看到它们协同工作。
